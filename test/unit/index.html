<!doctype html>
<html class=" no-js">
    <head>
        <meta charset="utf-8"/>
        <title>Head.JS Unit Tests</title>

        <!-- QUnit -->
        <link rel="stylesheet" type="text/css" href="../../media/libs/qunit/qunit-1.11.0.css" />
        
        <!-- HeadJS -->
        <script>
            // BrowserScope Results
            var _bTestResults = {};
        </script>
        <script type="text/javascript" src="../../dist/head.js"></script>

        <style>
            body {
                width: 1000px;
                margin: 20px auto;
            }
        </style>
    </head>
    <body>
        <div id="qunit"></div>
        <div id="qunit-userAgent"></div>
        
        <ul>
            <li>
                <h4>
                    <em id="browserscope">See how other browsers fared with these tests on <a href="http://www.browserscope.org/user/tests/table/agt1YS1wcm9maWxlcnINCxIEVGVzdBjn5PUSDA?v=3&layout=simple&highlight=1" target="_blank">BrowserScope</a></em>
                </h4>
            </li>
            <li>
                <em>
                    On certain browsers CSS loading will load the CSS file but not trigger the callback. Still evaluating which browsers that are.
                </em>
            </li>
            <li>
                <em>
                    If you have tests that fail, try clearing your cache, reloading, or running the tests individually. Some strange stuff with qUnit sometimes it seems.
                </em>
            </li>
            <li>
                <em>If after that a test still fails, be sure to let <a href="https://github.com/headjs/headjs/issues" target="_blank">us know</a> !</em>
            </li>
        </ul>

        <script type="text/javascript" src="../../media/libs/qunit/qunit-1.11.0.js"></script>
        <script type="text/javascript" src="../../media/libs/qunit/qunit-assert-step.js"></script>
        <script>QUnit.config.requireExpects = true;</script>
        
        <!-- Tests -->
        <script src="test.responsive.js"></script>
        <script src="test.feature.js"></script>
        <script src="test.load.js"></script>
        <script src="test.load-css.js"></script>
        
        <script>
            function sanitize(msg) {
                msg = msg || "";
                
                return msg
                    .replace(/[^A-Z]/gi, "")
                    .toLocaleLowerCase();
            }
            
            // Build browserscope results
            QUnit.log(function (details) {
                var key   = sanitize(details.message);
                var value = details.result ? 1 : 0;
                
                if (!!key) {
                    _bTestResults[key] = value;
                }
            });
            
            // Send browserscope results
            QUnit.done(function (details) {
                head.load("http://www.browserscope.org/user/beacon/" + "agt1YS1wcm9maWxlcnINCxIEVGVzdBjn5PUSDA");
            });
        </script>
    </body>
</html>
